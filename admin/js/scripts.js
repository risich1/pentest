$(document).ready(function() { 

    // Execute function updateGradeBoook()
    flag_updateGradeBoook = true;
    

    // ajaxe select session for distribution_load.php
    $("#select_session").change(function(){
        if($(this).val() == 0) return false;
        var select_session = $(this).val();

        $.ajax({

            url:'/admin/queries/teachers/select_session.php',
            data:{select_session:select_session},
            type: 'POST',
                success: function(data){
                    if(!data.error) {
                        $("#result").html(data);
                        //result.innerHTML = data;
                    } 

                }
        }); 
    }); 

    
    // ajaxe select session for view_load.php
    $("#select_session_vload").change(function(){
        if($(this).val() == 0) return false;
        var select_session = $(this).val();
        var teacher_id_vload = $("#teacher_id_vload").val();

        $.ajax({
            url:'/admin/queries/teachers/select_session_vload.php',
            data:   {
                        select_session:select_session,
                        teacher_id_vload:teacher_id_vload
                    },
            type: 'POST',
                success: function(data){
                    if(!data.error) {
                        $("#result").html(data);
                    } 
                }
        }); 
    }); 

    
    // ajaxe filter student performance for performance_student.php
    $('#btn_filter').click(function(){
        var filter_name = $('#filter_name').val();
        var filter_semester = $('#filter_semester').val();
        var filter_period = $('#filter_period').val();
        var filter_region = $('#filter_region').val();
        var filter_group = $('#filter_group').val();
        var filter_year = $('#filter_year').val();
        var token = $("[name='token']").val();
        $.ajax({
            url:'/admin/queries/performance_student/performance_student.php',
            data:   {
                        filter_name:filter_name, 
                        filter_semester:filter_semester, 
                        filter_period:filter_period,
                        filter_region:filter_region,
                        filter_group:filter_group,
                        filter_year:filter_year,
                        token: token
                    },
            type: 'POST',
                success: function(data){
                    if(!data.error) {
                        $("#result").html(data);
                    } 
                }
        });
    });
    

    // ajaxe filter student performance for performance_student.php
    $('#btn_filter_personal_things').click(function(){
        var filter_name = $('#filter_name').val();
        var filter_semester = $('#filter_semester').val();
        var filter_period = $('#filter_period').val();
        var filter_region = $('#filter_region').val();
        var filter_group = $('#filter_group').val();
        var filter_year = $('#filter_year').val();
        var token = $("[name='token']").val();
        $.ajax({
            url:'/admin/queries/view_all_personal/ajaxe_view_all_personal.php',
            data:   {
                        filter_name:filter_name, 
                        filter_semester:filter_semester, 
                        filter_period:filter_period,
                        filter_region:filter_region,
                        filter_group:filter_group,
                        filter_year:filter_year,
                        token: token
                    },
            type: 'POST',
                success: function(data){
                    if(!data.error) {
                        $("#result").html(data);
                    } 
                }
        });
    });
    
    
    // ajaxe filter student performance for view_all_statements.php
    $('#btn_filter_vastatements').click(function() {
        // var filter_name = $('#filter_name').val();
        var filter_period = $('#filter_period').val();
        var filter_group = $('#filter_group').val();
        var filter_discipline = $('#filter_discipline').val();
        var filter_name = $('#filter_name').val();
        var token = $("[name='token']").val();

        $.ajax({
            url:'/admin/queries/statements/result_statements.php',
            data:   {
                        filter_name:filter_name, 
                        filter_period:filter_period,
                        filter_group:filter_group,
                        filter_discipline:filter_discipline,
                        token: token
                    },
            type: 'POST',
            success: function(data){
                if(!data.error) {
                    $("#result").html(data);
                } 
            }
        });
    });


    // ajaxe filter student performance for view_all_statements_dolgi.php
    $('#btn_filter_vastatements_dolgi').click(function() {
        // var filter_name = $('#filter_name').val();
        var filter_period = $('#filter_period').val();
        var filter_group = $('#filter_group').val();
        var filter_discipline = $('#filter_discipline').val();
        var filter_name = $('#filter_name').val();
        var token = $("[name='token']").val();

        $.ajax({
            url:'/admin/queries/statements_dolgi/result_statements_dolgi.php',
            data:   {
                        filter_name:filter_name, 
                        filter_period:filter_period,
                        filter_group:filter_group,
                        filter_discipline:filter_discipline,
                        token: token
                    },
            type: 'POST',
            success: function(data){
                if(!data.error) {
                    $("#result").html(data);
                } 
            }
        });
    });



    
    // ajaxe filter student performance for view_all_payments.php
    
    $('#btn_filter_payment').click(function(){
        
        var filter_name = $('#filter_name').val();
        var filter_number = $('#filter_number').val();
        var token = $("[name='token']").val();

        $.ajax({
            
            url:'/admin/queries/payment/result_all_payment.php',
                        
            data:   {
                        filter_name:filter_name,
                        filter_number:filter_number,
                        token: token
                    },
            type: 'POST',
            success: function(data) {
                
                if(!data.error) {
                    $("#result").html(data);
                }
            }
            
            
        });
        
    });
    

    
    // main script for menu_deanery.php
    
    var path = window.location.href;
    $('ul a').each(function() {
        if (this.href === path) {
            $(this).parent().addClass('active');
        } 
    }); 
    // end main script for menu_deanery.php
    
    
    // This code table sorter
    $(".table-filter").tablesorter({
        widthFixed: true, 
        widgets: ['zebra']
    }); 
    // end table sorter 
    
        $(function(){
        $('[rel="popover"]').popover({
            container: 'body',
            html: true,
            content: function () {
                var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
                return clone;
            }
            }).click(function(e) {
                e.preventDefault();
        });
    });
    
    
    $('#btn_filter_student_order').click(function(){ 
    
        var filter_name = $('#filter_name').val();
        var filter_semester = $('#filter_semester').val();
        var filter_period = $('#filter_period').val();
        var filter_region = $('#filter_region').val();
        var filter_group = $('#filter_group').val();
        var filter_year = $('#filter_year').val();
        var order_id = $('#order_id').val();
        var token = $("[name='token']").val();

        
        $.ajax({

            url:'/admin/queries/select_student_order/select_student_order.php',
            data:   {
                        filter_name:filter_name, 
                        filter_semester:filter_semester, 
                        filter_period:filter_period,
                        filter_region:filter_region,
                        filter_group:filter_group,
                        filter_year:filter_year,
                        order_id:order_id,
                        token: token
                    },
            
            type: 'POST',
                success: function(data){

                    if(!data.error) {
                        $("#result").html(data);
                    } 

                }
        });
    
    });
    
    
    $('#btn_select_group_add_student').click(function(){
        
        var update_group_add_student = "update_group";
        var id_group_add_students = $('#id_group_add_students').val();
        var id_group_old_add_students = $('#id_group_old_add_students').val();
        var id_enrollee_add_students = $('#id_enrollee_add_students').val();
        var id_content_order_add_students = $('#id_content_order_add_students').val();
        
        $('#wanning_add_students_order').hide();
        
        $.post("/admin/queries/select_student_order/select_student_order.php", 
               {    
                    update_group_add_student:update_group_add_student,
                    id_group_add_students:id_group_add_students, 
                    id_group_old_add_students:id_group_old_add_students, 
                    id_enrollee_add_students:id_enrollee_add_students,
                    id_content_order_add_students:id_content_order_add_students
               
               }, function(data){
                    alert("Данные сохранены!");
                });
        
        
    });
    
    $('#btn_update_surname_add_student').click(function(){
        
        var update_surname_add_student = "update_surname";
        var new_surname = $('#new_surname').val();
        var id_enrollee_add_students = $('#id_enrollee_add_students').val();

        $('#wanning_add_students_order').hide();
        
        $.post("/admin/queries/select_student_order/select_student_order.php", 
               {    
                    update_surname_add_student:update_surname_add_student,
                    id_enrollee_add_students:id_enrollee_add_students, 
                    new_surname:new_surname 

               }, function(data){
                    alert("Данные сохранены!");
                });
        
        
    });
    

    setInterval(function(){
                    
        updateContetnOrder();
        
                    
    }, 1000);
                
    function updateContetnOrder() {
        
        if($('#add_students_order').attr('value')) {
            var id_order = $('#add_students_order').attr('value');
            var token = $("[name='token']").val();

            $.ajax({

                url: '/admin/queries/select_student_order/all_content_order.php',
                type: 'POST',
                data: {id_add_students_order:id_order, token: token},
                success: function(show_students) {

                    if(!show_students.error) {

                        $("#show-students").html(show_students);

                    }

                } 
            }); 
        }

    }// End function updateCars
    
    

    
    
    
    
}); // end document


